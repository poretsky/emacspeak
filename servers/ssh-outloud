#!/usr/bin/tcl
#$Id: ssh-outloud,v 23.505 2005/11/25 16:30:52 raman Exp $
#Description: Launch a TTS server on a remote host. via ssh
#Copyright (C) 1995 -- 2003, T. V. Raman 
# {{{  documentation

# Running TTS server remotely.
#Note that on modern  Linux installations,
#You will need to:
#Create  file .ssh/environment 
# in your home directory on the local machine,
# Set ECIINI in that file like so:
#ECIINI=<dirname>
#and finally, update /etc/ssh/sshd_config 
#to set PermitUserEnvironment to yes
#In addition, you may need to ssh once by hand to get past the 
#"do you want to continue connecting" question.

# }}}
set host [exec hostname]
puts stderr "running on host <$host>"
if [expr $argc == 0] {
    set remote [exec cat $env(HOME)/.emacspeak/.current-remote-hostname]
} else {
    set remote [lindex $argv 0]
}
set tcl /usr/bin/tcl 
regsub {/ssh-}  $argv0 {/} tts
puts stderr "Running <ssh $remote  $tcl $tts>"
exec     ssh -o StrictHostKeyChecking=no $remote  $tcl $tts
