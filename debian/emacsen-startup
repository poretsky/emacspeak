;; -*-emacs-lisp-*-
;; /etc/emacs/site-start.d/01emacspeak.el
;;
;; Emacs startup file for the Debian emacspeak package
;;
;; Originally contributed by Nils Naumann <naumann@unileoben.ac.at>
;; Modified by Dirk Eddelbuettel <edd@debian.org>
;; Adapted for dh-make by Jim Van Zandt <jrv@vanzandt.mv.com>
;; Modified by Igor B. Poretsky <poretsky@mlbox.ru>

;; The emacspeak package follows the Debian/GNU Linux 'emacsen' policy and
;; byte-compiles its elisp files for each 'emacs flavor' (emacs19,
;; xemacs19, emacs20, xemacs20...).  The compiled code is then
;; installed in a subdirectory of the respective site-lisp directory.
;; Nevertheless, we do not have to take care of load-path list
;; because Emacspeak does it itself.

;; At first check whether the package was purged:
(if (not (file-exists-p "/usr/share/emacs/site-lisp/emacspeak"))
    (message "Package emacspeak removed but not purged.  Skipping setup.")

  ;; Enable speech feedback if it is requested
  (when (getenv "EMACSPEAK")
    (load (concat "/usr/share/" (symbol-name flavor)
                  "/site-lisp/emacspeak/lisp/emacspeak-setup") t)
    (setenv "EMACSPEAK")))
