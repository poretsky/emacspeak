;; -*-emacs-lisp-*-
;; /etc/emacs/site-start.d/01emacspeak.el
;;
;; Emacs startup file for the Debian emacspeak package
;;
;; Originally contributed by Nils Naumann <naumann@unileoben.ac.at>
;; Modified by Dirk Eddelbuettel <edd@debian.org>
;; Adapted for dh-make by Jim Van Zandt <jrv@vanzandt.mv.com>
;; Modified by Igor B. Poretsky <poretsky@mlbox.ru>

;; The emacspeak package follows the Debian/GNU Linux 'emacsen' policy and
;; byte-compiles its elisp files for each 'emacs flavor' (emacs19,
;; xemacs19, emacs20, xemacs20...).  The compiled code is then
;; installed in a subdirectory of the respective site-lisp directory.
;; We have to add this to the load-path:
(if (not (file-exists-p "/usr/share/emacs/site-lisp/emacspeak"))
    (message "Package emacspeak removed but not purged.  Skipping setup.")
  (setq load-path
        (cons
         (concat "/usr/share/" (symbol-name debian-emacs-flavor)
                 "/site-lisp/emacspeak/lisp")
         load-path))

  ;; Enable speech feedback if it is requested
  (when (getenv "EMACSPEAK")
    (load "emacspeak-setup" t)
    (setenv "EMACSPEAK")))
